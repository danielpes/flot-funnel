
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Flot Examples: Funnel Charts</title>
	<link href="css/examples.css" rel="stylesheet" type="text/css">
	
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../../excanvas.min.js"></script><![endif]-->
	<script language="javascript" type="text/javascript" src="js/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.flot.funnel.js"></script>
	<script type="text/javascript">

	$(function() {

		// Example Data

		var data = [],
			series = Math.floor(Math.random() * 6) + 3;

		for (var i = 0; i < series; i++) {
			data[i] = {
				label: "Series" + (i + 1),
				data: Math.floor(Math.random() * 100) + 1
			}
		}
		var placeholder = $("#placeholder");
		
		$.plot('#placeholder', data, {
		    series: {
		        funnel: {
		            show: true,
		            label: {
		                align: "center",
		                show: true,
                        background: {
                            opacity: 0.5
                        }
                    }
		        }
		    },
			grid: {
				hoverable: true,
				clickable: true
			}
		});
		
		placeholder.bind("plothover", function(event, pos, obj) {

			if (!obj) {
				return;
			}

			var value = parseFloat(obj.series.data[0][1]).toFixed(2);
			$("#hover").html("<span style='font-weight:bold; color:" + obj.series.color + "'>" + obj.series.label + " (" + value + "%)</span>");
		});

		placeholder.bind("plotclick", function(event, pos, obj) {

			if (!obj) {
				return;
			}

			var value = parseFloat(obj.series.data[0][1]);
			alert(""  + obj.series.label + ": " + value);
		});
		
    	/*function labelFormatter(label, series) {
    		return "<div style='font-size:8pt; text-align:center; padding:2px; color:white;'>" + label + "<br/>" + Math.round(series.percent) + "%</div>";
    	}*/
    		
	});


	</script>
</head>
<body>

	<div id="header">
		<h2>Funnel Charts</h2>
	</div>

	<div id="content">

		<h3 id="title"></h3>
		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>
		
	</div>
	
</body>
</html>
