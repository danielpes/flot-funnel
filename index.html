
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Flot Examples: Funnel Charts</title>
	<link href="css/examples.css" rel="stylesheet" type="text/css">
	
	<script language="javascript" type="text/javascript" src="js/jquery.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.flot.js"></script>
	<script language="javascript" type="text/javascript" src="js/jquery.flot.funnel.js"></script>
	<script type="text/javascript">

	$(function() {

		// Example Data

		var data = [],
			series = Math.floor(Math.random() * 3) + 3;

		for (var i = 0; i < series; i++) {
			data[i] = {
				label: "Series" + (i + 1),
				data: Math.floor(Math.random() * 100) + 1
			}
		}
		var placeholder = $("#placeholder");
		
		$.plot('#placeholder', data, {
		    series: {
		        funnel: {
		            show: true,
					stem: {
						height: 0.2,
						width: 0.4
					},
		            label: {
						show: true,
						align: "center",
						threshold: 0.04,
						formatter: labelFormatter
                    },
					highlight: {
						opacity: 0.2
					}
				}
		    },
			grid: {
				hoverable: true,
				clickable: true
			}
		});
		
		placeholder.bind("plotclick", function(event, pos, obj) {

			if (!obj) {
				return;
			}

			var value = parseFloat(obj.series.data[0][1]);
			alert(obj.series.label + ": " + value);
		});
		
    	function labelFormatter(label, series) {
    		return "<div style='font-size:11pt; text-align:center; padding:2px; color:#fff;'>"+series.data[0][1]+"</div>";
    	}
    		
	});


	</script>
</head>
<body>

	<div id="header">
		<h2 style='text-align:center'>Funnel Charts</h2>
	</div>

	<div id="content">

		<h3 id="title"></h3>
		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder"></div>
		</div>
		
	</div>
	
</body>
</html>
